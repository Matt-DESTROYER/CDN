const Input=(function(){const e=[];function t(t){t=t||window.event;for(let n=0;n<e.length;n++)if(e[n].htmlElement===t.target){e[n].input[t.keyCode]=!0,e[n].input[t.key.toString()]=!0,e[n].input.keyIsPressed=!0,e[n].input.keyCode=t.keyCode,e[n].input.key=t.key.toString();break}}function n(t){t=t||window.event;for(let n=0;n<e.length;n++)if(e[n].htmlElement===t.target){e[n].input[t.keyCode]=!1,e[n].input[t.key.toString()]=!1,e[n].input.keyCode===t.keyCode&&(e[n].input.keyIsPressed=!1);break}}function o(t){t=t||window.event;for(let n=0;n<e.length;n++)if(e[n].htmlElement===t.target){e[n].input.buttons=t.buttons,e[n].input.mouseDown=!0;break}}function i(t){t=t||window.event;for(let n=0;n<e.length;n++)if(e[n].htmlElement===t.target){e[n].input.buttons=t.buttons,e[n].input.mouseDown=!1;break}}function u(t){t=t||window.event;for(let n=0;n<e.length;n++)if(e[n].htmlElement===t.target){e[n].input.pmouseX=e[n].input.mouseX,e[n].input.pmouseY=e[n].input.mouseY;const o=t.target.getBoundingClientRect();e[n].input.mouseX=t.target.clientX-o.left,e[n].input.mouseY=t.target.clientX-o.top;break}}return{listenTo:function(r){const s={element:r,input:{}};return e.push(s),r.addEventListener("keydown",t),r.addEventListener("keyup",n),r.addEventListener("mousedown",o),r.addEventListener("mouseup",i),r.addEventListener("mousemove",u),s.input},stopListening:function(e){return e.removeEventListener("keydown",t),e.removeEventListener("keyup",n),e.removeEventListener("mousedown",o),e.removeEventListener("mouseup",i),e.removeEventListener("mousemove",u),e}}})();
