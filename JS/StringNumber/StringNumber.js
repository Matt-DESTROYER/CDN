class StringNumber{constructor(t){this.n=StringNumber.CleanNumberString((t||"0").toString())}static zero(){return new StringNumber("0")}static CleanNumberString(t){if("number"==typeof t)return t.toString();if("string"==typeof t)return""===(t=t.split(/[^0-9\.\-]/g).join(""))?"0":t;throw new TypeError("[StringNumber.CleanNumberString] Expected parameter n to be a string.")}static ValidNumberString(t){if("string"==typeof t)return t===t.match(/-?[0-9]+(\.[0-9]+)?/)[0];throw new TypeError("[StringNumber.ValidNumberString] Expected parameter n to be a string.")}static DigitToInt(t){switch(t.toString().trim()){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9}throw new Error("[StringNumber.DigitToInt] An error occurred converting a digit to an integer.")}toNumber(){return Number(this.n)}toString(){return this.n}trim(){if(this.n instanceof Array){this.n=this.n.flatMap(t=>""===t||" "===t?[]:[t]);let t=!1;for(this.n.indexOf("-")>-1&&(t=!0,this.n=this.n.join("").replace("-","").split(""));"0"===this.n[0]&&"."!==this.n[1];)this.n.splice(0,1);for(;"0"===this.n[this.n.length-1];)this.n.splice(this.n.length-1,1);"."===this.n[this.n.length-1]&&this.n.splice(this.n.length-1,1),this.n=(t?"-":"")+this.n.join("")}else if("string"==typeof this.n){this.n=this.n.replace(/[\s]/g,"");let t=!1;for(this.n.indexOf("-")>-1&&(t=!0,this.n=this.n.replace("-","")),this.n=this.n.split("");"0"===this.n[0]&&"."!==this.n[1];)this.n.splice(0,1);for(;this.n.includes(".")&&"0"===this.n[this.n.length-1];)this.n.splice(this.n.length-1,1);"."===this.n[this.n.length-1]&&this.n.splice(this.n.length-1,1),this.n=(t?"-":"")+this.n.join("")}else{if("number"!=typeof this.n)throw new Error("[StringNumber.prototype.trim] A StringNumber was likely manipulated externally causing an internal error.");this.n=this.n.toString()}return""===this.n&&(this.n="0"),this}equalTo(t){if("string"!=typeof t&&"number"!=typeof t||(t=new StringNumber(t)),t instanceof StringNumber)return this.trim().n===t.trim().n;throw new TypeError("[StringNumber.prototype.equalTo] Expected parameter other to be a StringNumber or String.")}notEqualTo(t){if("string"!=typeof t&&"number"!=typeof t||(t=new StringNumber(t)),t instanceof StringNumber)return this.trim().n!==t.trim().n;throw new TypeError("[StringNumber.prototype.notEqualTo] Expected parameter other to be a StringNumber or String.")}greaterThan(t){if("string"!=typeof t&&"number"!=typeof t||(t=new StringNumber(t)),t instanceof StringNumber){this.n=this.n.split("");let n=t.n.split("");if(this.n.includes(".")||n.includes(".")){for(this.n.includes(".")||this.n.push("."),n.includes(".")||n.push(".");this.n.length-this.n.indexOf(".")<n.length-n.indexOf(".");)this.n.push("0");for(;this.n.length-this.n.indexOf(".")>n.length-n.indexOf(".");)n.push("0")}for(;this.n.length>n.length;)n.splice(0,0,"0");for(;this.n.length<n.length;)this.n.splice(0,0,"0");if(this.n=this.n.join(""),n=n.join(""),this.n.indexOf("-")>-1&&-1===n.indexOf("-"))return!1;if(n.indexOf("-")>-1&&-1===this.indexOf("-"))return!0;if(this.n.indexOf("-")>-1&&n.indexOf("-")>-1){this.n=this.n.replace("-","");let t=this.lessThan(t.replace("-"),"");return this.n="-"+this.n,t}const i=Math.min(this.n.length,n.length);for(let t=0;t<i;t++)if("."!==n[t]){if(StringNumber.DigitToInt(this.n[t])>StringNumber.DigitToInt(n[t]))return this.trim(),!0;if(StringNumber.DigitToInt(this.n[t])<StringNumber.DigitToInt(n[t]))return this.trim(),!1}return this.trim(),this.n.length>n.length}throw new TypeError("[StringNumber.prototype.greaterThan] Expected parameter other to be a StringNumber or String.")}greaterThanOrEqualTo(t){return this.equalTo(t)||this.greaterThan(t)}lessThan(t){if("string"!=typeof t&&"number"!=typeof t||(t=new StringNumber(t)),t instanceof StringNumber){this.n=this.n.split("");let n=t.n.split("");if(this.n.includes(".")||n.includes(".")){for(this.n.includes(".")||this.n.push("."),n.includes(".")||n.push(".");this.n.length-this.n.indexOf(".")<n.length-n.indexOf(".");)this.n.push("0");for(;this.n.length-this.n.indexOf(".")>n.length-n.indexOf(".");)n.push("0")}for(;this.n.length>n.length;)n.splice(0,0,"0");for(;this.n.length<n.length;)this.n.splice(0,0,"0");if(this.n=this.n.join(""),n=n.join(""),this.n.indexOf("-")>-1&&-1===n.indexOf("-"))return!0;if(n.indexOf("-")>-1&&-1===this.indexOf("-"))return!1;if(this.n.indexOf("-")>-1&&n.indexOf("-")>-1){this.n=this.n.replace("-","");let t=this.greaterThan(t.replace("-"),"");return this.n="-"+this.n,t}const i=Math.min(this.n.length,n.length);for(let t=0;t<i;t++)if("."!==n[t]){if(StringNumber.DigitToInt(this.n[t])<StringNumber.DigitToInt(n[t]))return this.trim(),!0;if(StringNumber.DigitToInt(this.n[t])>StringNumber.DigitToInt(n[t]))return this.trim(),!1}return this.trim(),this.n.length<n.length}throw new TypeError("[StringNumber.prototype.lessThan] Expected parameter other to be a StringNumber or String.")}lessThanOrEqualTo(t){return this.equalTo(t)||this.lessThan(t)}round(){return this.n.indexOf(".")>-1?StringNumber.DigitToInt(this.n[this.n.indexOf(".")+1])>4?this.ceil():this.floor():this}floor(){return this.n.indexOf(".")>-1&&(this.n=this.n.substr(0,this.n.indexOf("."))),this}ceil(){return this.n.indexOf(".")>-1&&(this.n=this.n.substr(0,this.n.indexOf(".")),this.add(1)),this}add(t){if("string"!=typeof t&&"number"!=typeof t||(t=new StringNumber(t)),t instanceof StringNumber){if(0===t.trim().n)return this;if(0===this.trim().n)return this.n=t.n,this;let n=!1;if(t.n.indexOf("-")>-1)return this.subtract(t.n.replace("-","")),this;if(this.n.indexOf("-")>-1){let n=t.n;return t.n=this.n.replace("-",""),this.n=n,this.subtract(t),t.n=n,this}this.n="0"+this.n,this.n=this.n.split("");let i=t.n.split("");if(this.n.includes(".")||i.includes(".")){for(this.n.includes(".")||this.n.push("."),i.includes(".")||i.push(".");this.n.length-this.n.indexOf(".")<i.length-i.indexOf(".");)this.n.push("0");for(;this.n.length-this.n.indexOf(".")>i.length-i.indexOf(".");)i.push("0")}for(;this.n.length>i.length;)i.splice(0,0,"0");for(;this.n.length<i.length;)this.n.splice(0,0,"0");let e,r=0;for(let t=0;t<i.length;t++)if("."!==i[i.length-t-1]){for(e=StringNumber.DigitToInt(this.n[this.n.length-t-1])+StringNumber.DigitToInt(i[i.length-t-1]),e+=r,r=0;e>9;)r++,e-=10;this.n[this.n.length-t-1]=e.toString()}return r>0&&this.n.splice(0,0,r.toString()),this.n=this.n.join(""),n&&(this.n="-"+this.n),this.trim()}throw new TypeError("[StringNumber.prototype.add] Expected parameter other to be a StringNumber or String.")}subtract(t){if("string"!=typeof t&&"number"!=typeof t||(t=new StringNumber(t)),t instanceof StringNumber){if(t.n.indexOf("-")>-1)return this.add(t.n.replace("-","")),this;if(this.n.indexOf("-")>-1)return this.n=this.n.replace("-",""),this.add(t),this.n="-"+this.n,this;if(this.equalTo(t))return this.n="0",this;this.n="0"+this.n;let n,i,e,r=!1;if(this.lessThan(t)?(r=!0,n=this.n.split(""),this.n=t.n.split("")):(this.n=this.n.split(""),n=t.n.split("")),this.n.includes(".")||n.includes(".")){for(this.n.includes(".")||this.n.push("."),n.includes(".")||n.push(".");this.n.length-this.n.indexOf(".")<n.length-n.indexOf(".");)this.n.push("0");for(;this.n.length-this.n.indexOf(".")>n.length-n.indexOf(".");)n.push("0")}for(;this.n.length>n.length;)n.splice(0,0,"0");for(;this.n.length<n.length;)this.n.splice(0,0,"0");this.n=this.n.map(t=>"."===t?".":StringNumber.DigitToInt(t)),n=n.map(t=>"."===t?".":StringNumber.DigitToInt(t));for(let t=0;t<n.length;t++)if("."!==(e=n[n.length-t-1])){if(this.n[this.n.length-t-1]<e){let n=t+1;for(;0===this.n[this.n.length-n-1]||"."===this.n[this.n.length-n-1];)n++;for(;n>t;)"."!==this.n[this.n.length-n-1]?(this.n[this.n.length-n-1]-=1,"."===this.n[this.n.length-n]?this.n[this.n.length-n+1]+=10:this.n[this.n.length-n]+=10,n--):n--}i=this.n[this.n.length-t-1]-e,this.n[this.n.length-t-1]=i}return this.n=this.n.map(t=>t.toString()).join(""),this.n=(r?"-":"")+this.n,this.trim()}throw new TypeError("[StringNumber.prototype.subtract] Expected parameter other to be a StringNumber or String.")}multiply(t){if("string"!=typeof t&&"number"!=typeof t||(t=new StringNumber(t)),t instanceof StringNumber){if("0"===this.trim().n||"0"===t.trim().n)return this.n="0",this;let n,i=!1;this.n.indexOf("-")>-1&&(i=!i,this.n=this.n.replace("-","")),t.n.indexOf("-")>-1&&(i=!i,t.n=t.n.replace("-","")),this.lessThan(t)?(n=this.n,this.n=t.n):n=t.n;let e=0;this.n.indexOf(".")>-1&&(e+=this.n.split(".")[1].length,this.n=this.n.replace(".","")),n.indexOf(".")>-1&&(e+=n.split(".")[1].length,n=n.replace(".","")),n=n.split("").map(Number),this.n=this.n.split("").map(Number);const r=this.n.slice();let s=[],h=0;for(let t=0;t<n.length;t++){this.n=r.slice();for(let i=0;i<r.length;i++)for(this.n[r.length-i-1]*=n[n.length-t-1],this.n[r.length-i-1]+=h,h=0;this.n[r.length-i-1]>9;)this.n[r.length-i-1]-=10,h++;h>0&&(this.n.splice(0,0,h),h=0);for(let n=0;n<t;n++)this.n.push(0);s.push(this.n.map(t=>t.toString()).join(""))}this.n=s[0];for(let t=1;t<s.length;t++)this.add(s[t]);return e>0&&(this.n=this.n.split(""),this.n.splice(this.n.length-e,0,"."),this.n=this.n.join("")),i&&(this.n="-"+this.n),this.trim(),this}throw new TypeError("[StringNumber.prototype.multiply] Expected parameter other to be a StringNumber or String.")}divide(t,n=10){if("string"!=typeof t&&"number"!=typeof t||(t=new StringNumber(t)),t instanceof StringNumber){if(n<0&&(n=0),"0"===this.trim().n)return this;if("0"===t.trim().n)throw new Error("Cannot divide by 0.");let i,e=!1;this.n.indexOf("-")>-1&&(e=!e,this.n=this.n.replace("-","")),t.n.indexOf("-")>-1&&(e=!e,t.n=t.n.replace("-","")),this.n=this.n.split(""),i=t.n;let r,s,h="",l="0";for(let t=0;t<this.n.length;t++)if("."!==this.n[t]){for(r=0,s=new StringNumber(l+this.n[t]);s.greaterThanOrEqualTo(i);)s.subtract(i),r++;l=s.n,h+=r.toString()}else h+=".";if("0"!==l)for(-1===this.n.indexOf(".")&&(this.n.push("."),h+=".");n>0;){for(r=0,s=new StringNumber(l+"0");s.greaterThanOrEqualTo(i);)s.subtract(i),r++;if(l=s.n,h+=r.toString(),n--,"0"===l)break}return this.n=(e?"-":"")+h,this.trim(),this}throw new TypeError("[StringNumber.prototype.divide] Expected parameter other to be a StringNumber or String.")}modulus(t){if("string"!=typeof t&&"number"!=typeof t||(t=new StringNumber(t)),t instanceof StringNumber){for(;this.greaterThanOrEqualTo(t);)this.subtract(t);return this.trim(),this}throw new TypeError("[StringNumber.prototype.modulus] Expected parameter other to be a StringNumber or String.")}}
